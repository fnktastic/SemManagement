<ResourceDictionary
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:vm="using:SemManagement.UWP.ViewModel"
    xmlns:interactivity="using:Microsoft.Xaml.Interactivity" 
    xmlns:core="using:Microsoft.Xaml.Interactions.Core"
    xmlns:controls="using:Microsoft.Toolkit.Uwp.UI.Controls"
    xmlns:converters="using:SemManagement.UWP.Converters"
    xmlns:media="using:Windows.UI.Xaml.Media">

    <converters:StringFormatConverter x:Key="StringFormatConverter" />
    <converters:BoolToVisibleOrCollapsed x:Key="BoolToVisibleOrCollapsed" />
    <converters:InverseBoolToVisibilityConverter x:Key="InverseBoolToVisibilityConverter" />

    <media:AcrylicBrush x:Key="CustomAcrylicBrush" 
                        BackgroundSource="HostBackdrop"
                        TintOpacity="0.2" 
                        TintColor="#FFDCFCFC" 
                        FallbackColor="White" />

    <vm:ViewModelLocator x:Key="Locator" />

    <AcrylicBrush x:Key="GridViewItemBackground"
                  BackgroundSource="HostBackdrop"
                  TintColor="White"
                  TintOpacity="0.75"
                  FallbackColor="#FFB5B5B5"/>

    <AcrylicBrush x:Key="NavigationViewExpandedPaneBackground"
                  BackgroundSource="HostBackdrop"
                  TintColor="White"
                  TintOpacity="0.6"
                  FallbackColor="White"/>

    <DataTemplate x:Key="AudioItemTemplate">
        <TextBlock Text="{Binding Name}" />
    </DataTemplate>
    
    <DataTemplate x:Key="StationItemTemplate">
        <Border Width="200" 
                Padding="15 10"
                CornerRadius="5"
                Background="{ThemeResource GridViewItemBackground}">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition />
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition />
                </Grid.ColumnDefinitions>
                <StackPanel>
                    <TextBlock Text="{Binding Name }" />
                    <TextBlock Text="{Binding Sid}" />
                    <TextBlock Text="{Binding Licence}" />
                    <Button Content="Detals" HorizontalAlignment="Center" VerticalAlignment="Bottom" Margin="0 5 0 0">
                        <Button.Flyout>
                            <Flyout>
                                <StackPanel>
                                    <TextBlock Text="{Binding Uid, Converter={StaticResource StringFormatConverter}, ConverterParameter='User ID: {0}'}"/>
                                    <TextBlock Text="{Binding Synchronized}" Tag="{Binding Synchronized}" x:Name="synchronizedTextBlock" >
                                        <interactivity:Interaction.Behaviors>
                                            <core:DataTriggerBehavior Binding="{Binding Tag, ElementName=synchronizedTextBlock}" Value="0">
                                                <core:ChangePropertyAction PropertyName="Text" Value="Machine is Synchronized" />
                                            </core:DataTriggerBehavior>
                                            <core:DataTriggerBehavior Binding="{Binding Tag, ElementName=synchronizedTextBlock}" Value="1">
                                                <core:ChangePropertyAction PropertyName="Text" Value="Machine is not Synchronized" />
                                            </core:DataTriggerBehavior>
                                        </interactivity:Interaction.Behaviors>
                                    </TextBlock>
                                    <TextBlock Text="{Binding Soft_Installed}" Tag="{Binding Soft_Installed}" x:Name="softInstalledTextBlock" >
                                        <interactivity:Interaction.Behaviors>
                                            <core:DataTriggerBehavior Binding="{Binding Tag, ElementName=softInstalledTextBlock}" Value="0">
                                                <core:ChangePropertyAction PropertyName="Text" Value="The software is not installed" />
                                            </core:DataTriggerBehavior>
                                            <core:DataTriggerBehavior Binding="{Binding Tag, ElementName=softInstalledTextBlock}" Value="1">
                                                <core:ChangePropertyAction PropertyName="Text" Value="The software is installed" />
                                            </core:DataTriggerBehavior>
                                        </interactivity:Interaction.Behaviors>
                                    </TextBlock>
                                    <TextBlock Text="{Binding Autosync}" Tag="{Binding Autosync}" x:Name="autosyncTextBlock" >
                                        <interactivity:Interaction.Behaviors>
                                            <core:DataTriggerBehavior Binding="{Binding Tag, ElementName=autosyncTextBlock}" Value="0">
                                                <core:ChangePropertyAction PropertyName="Text" Value="Autosync Enabled" />
                                            </core:DataTriggerBehavior>
                                            <core:DataTriggerBehavior Binding="{Binding Tag, ElementName=autosyncTextBlock}" Value="1">
                                                <core:ChangePropertyAction PropertyName="Text" Value="Autosync Disabled" />
                                            </core:DataTriggerBehavior>
                                        </interactivity:Interaction.Behaviors>
                                    </TextBlock>
                                    <TextBlock Text="{Binding Hardware_ID, Converter={StaticResource StringFormatConverter}, ConverterParameter='Hardware ID: {0}'}"/>
                                    <TextBlock Text="{Binding Blocked}" Tag="{Binding Blocked}" x:Name="blockedTextBlock" HorizontalAlignment="Center" Margin="0 15 0 0">
                                        <interactivity:Interaction.Behaviors>
                                            <core:DataTriggerBehavior Binding="{Binding Tag, ElementName=blockedTextBlock}" Value="0">
                                                <core:ChangePropertyAction PropertyName="Text" Value="Active" />
                                                <core:ChangePropertyAction PropertyName="Foreground" Value="Green" />
                                            </core:DataTriggerBehavior>
                                            <core:DataTriggerBehavior Binding="{Binding Tag, ElementName=blockedTextBlock}" Value="1">
                                                <core:ChangePropertyAction PropertyName="Text" Value="Blocked" />
                                                <core:ChangePropertyAction PropertyName="Foreground" Value="Red" />
                                            </core:DataTriggerBehavior>
                                        </interactivity:Interaction.Behaviors>
                                    </TextBlock>
                                </StackPanel>
                            </Flyout>
                        </Button.Flyout>
                    </Button>
                </StackPanel>
            </Grid>
        </Border>
    </DataTemplate>

</ResourceDictionary>
